/* ============================================
   Mobile-First Responsive Design
   Fixes horizontal scrollbars and overflow issues
   ============================================ */

/* ============================================
   1. Global Mobile-First Fixes
   ============================================ */

/* Prevent horizontal overflow */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* All containers respect viewport */
* {
  max-width: 100%;
}

/* ============================================
   2. Table Responsive Fixes
   ============================================ */

/* Table wrapper for horizontal scroll */
.table-wrapper {
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 16px 0;
}

/* Tables should be scrollable on mobile */
table {
  min-width: 100%;
  display: table;
}

@media (max-width: 767px) {
  /* Force table to be scrollable */
  .table-wrapper {
    max-width: calc(100vw - 32px); /* Account for padding */
  }

  table {
    min-width: 600px; /* Minimum width for readability */
    font-size: 14px;
  }

  table th,
  table td {
    padding: 8px 12px;
    white-space: nowrap;
  }
}

/* ============================================
   3. Chart Responsive Fixes
   ============================================ */

/* Chart containers */
.chart-container,
canvas {
  max-width: 100% !important;
  height: auto !important;
}

@media (max-width: 767px) {
  /* Charts should be touch-friendly */
  .chart-container {
    width: 100%;
    min-height: 200px;
    max-height: 300px;
    position: relative;
  }

  canvas {
    width: 100% !important;
    max-width: 100% !important;
  }
}

/* ============================================
   4. Grid & Layout Responsive
   ============================================ */

@media (max-width: 767px) {
  /* Force single column on mobile */
  .grid,
  [class*="grid-cols-"] {
    grid-template-columns: 1fr !important;
  }

  /* Adjust gaps for mobile */
  .gap-6 { gap: 1rem; }
  .gap-4 { gap: 0.75rem; }

  /* Reduce padding on mobile */
  .p-8 { padding: 1rem; }
  .p-6 { padding: 1rem; }
  .p-4 { padding: 0.75rem; }
  
  .px-6 { padding-left: 1rem; padding-right: 1rem; }
  .px-4 { padding-left: 0.75rem; padding-right: 0.75rem; }
  
  .py-8 { padding-top: 1rem; padding-bottom: 1rem; }
  .py-6 { padding-top: 1rem; padding-bottom: 1rem; }
}

/* ============================================
   5. Card & Content Overflow Fixes
   ============================================ */

/* All cards and content boxes */
.bg-white,
.shadow-xl,
.rounded-lg,
[class*="bg-gray"] {
  overflow-x: hidden;
}

@media (max-width: 767px) {
  /* Cards take full width with margin */
  .max-w-2xl,
  .max-w-4xl,
  .max-w-7xl,
  .max-w-md {
    max-width: 100%;
    width: 100%;
    margin-left: 0;
    margin-right: 0;
  }

  /* Reduce card padding on mobile */
  .bg-white.p-8,
  .bg-white.p-6 {
    padding: 1rem;
  }
}

/* ============================================
   6. Form & Input Responsive
   ============================================ */

@media (max-width: 767px) {
  /* Inputs take full width */
  input,
  textarea,
  select {
    width: 100%;
    font-size: 16px; /* Prevent zoom on iOS */
  }

  /* Button groups stack on mobile */
  .flex.gap-2,
  .flex.gap-3,
  .flex.gap-4 {
    flex-direction: column;
  }

  .flex.gap-2 button,
  .flex.gap-3 button,
  .flex.gap-4 button {
    width: 100%;
  }
}

/* ============================================
   7. Touch Targets (iOS HIG: 44pt minimum)
   ============================================ */

@media (max-width: 767px) {
  /* Ensure all interactive elements are at least 44px */
  button,
  a {
    min-height: 44px;
  }

  /* Button text should be readable */
  button {
    font-size: 16px;
    padding: 12px 16px;
  }
}

/* ============================================
   8. Safe Area Insets (iOS Notch/Home Indicator)
   ============================================ */

@media (max-width: 767px) {
  /* Respect safe areas */
  body {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  header {
    padding-top: max(16px, env(safe-area-inset-top));
  }

  footer,
  .bottom-nav {
    padding-bottom: max(16px, env(safe-area-inset-bottom));
  }
}
